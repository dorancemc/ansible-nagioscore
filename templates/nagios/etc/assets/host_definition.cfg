define host {
    use                     {{ _host.use|default('server') }}
    host_name               {{ _host.name }}
    alias                   {{ _host.alias|default(_host.name) }}
    address                 {{ _host.address|default(_host.name) }}
{% for key, value in _host.items() if key not in ['address','alias','host_name','name','services','use'] %}
    {{ key }}       {{ value }}
{% endfor %}
}
{% for key, value in _host.services.items() %}
{% if ( value is iterable ) and ( value is not string ) %}
define service {
    host_name               {{ _host.name }}
    service_description     {{ key }}
{% for key1, value1 in value.items() %}
    {{ key1 }}              {{ value1 }}
{% endfor %}
}
{% else %}

define service {
    use                     generic-service
    host_name               {{ _host.name }}
    service_description     {{ key }}
    check_command           {{ value }}
}
{% endif %}
{% endfor %}
